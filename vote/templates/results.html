{% extends 'base.html' %}
{% block content %}
{% load static %}
    <script src="https://cdn.zingchart.com/zingchart.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="{% static 'register now.css' %}">
    <div class="register jumbotron text-center">
        <br>
        <div class="alert text-center alert-success alert-dismissible">
            <button type="button" class="close" data-dismiss="alert">×</button>   <strong>Merci , Votre vote a été comptabilisé !</strong> &emsp; Ci dessous les resultats provisoire...
        </div>
        <ul>
	{% for choice in question.choice_set.all %}
	<li>
		<p class="mimi">{{ choice.choice_text }} <div class="mini"> {{ choice.votes }} vote{{ choice.votes | pluralize }}</div></p>
	</li>
	{% endfor %}
    </ul>
</div>
<div id="myChart"></div>
<script>

    let objId = {{ question.id }};
    let dataURL = "vote/resultdata/1/";
    var state = {
        'items': [],
        'values': [],
    };
    $.ajax({
        method: 'GET',
        url: dataURL,
        success:function (response) {
            console.log("reponse", response);
            for (var i in response){
                var key = Object.keys(response[i])[0];
                var value = Object.values(response[i])[0];
                state.items.push(key);
                state.values.push(value);
            }
            console.log('STATE', state)
        }
    });
    let charData = {
        "type" : "bar",
        "scale-x":{
            "values":[
                "dorge",
                "Erik",
                "kara"
            ]
        },
        "series":[
            {
                "values":[
                    24,
                    5,
                    10
                ]
            }
        ]
    };
    zingchart.render({
        id: "myChart",
        data : charData,
    });
</script>

<footer class="section-spacer footer-section text-center " id="footer">
    <div class="container-fluid">

      <div class="row flex-column-reverse flex-sm-row flex-lg-row">
        <div class="col-lg col-6">
          <div class="footer-widget first-of-footer-widget">
            <img src="{% static 'logo_bde.png' %}" width=100px; class="logo-sm mb-10 mt-0" alt="BDE ENSIT footer logo">
            <br><p1 class="mt-0">&copy; 2019 |  All rights reserved.</p1>
           <br> <span>Do not hesitate to send us an email: </span><br><br>
            <a href="BDE_ENSIT@gmail.com">BDE_ENSIT@gmail.com</a><br>
            <span> </span><br><br>
            <ul class="social-list__inline mt-10">
              <li>
                <a href="" target="_blank" rel="noopener" aria-label="page twitter">
                  <i class="fab fa-twitter"></i>
                </a>
            </li>
              <li>
                <a href=""target="_blank" rel="noopener" aria-label="page facebook">
                  <i class="fab fa-facebook"></i>
                </a>
              </li>
              <li>
                  <a href=""target="_blank" rel="noopener" aria-label="page youtube">
                    <i class="fab fa-youtube"></i>
                  </a>
                </li>
                <li>
                    <a href=""target="_blank" rel="noopener" aria-label="page linkedin">
                      <i class="fab fa-linkedin"></i>
                    </a>
                  </li>
            </ul>
          </div>
        </div>
     </div>
  </div>

</footer>

{% endblock %}
